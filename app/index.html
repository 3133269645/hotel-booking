<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Hotel Booking</title>
    <link href="https://fonts.googleapis.com/css?family=Lato:100,300,400" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Roboto:100" rel="stylesheet">
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <link rel="stylesheet" href="stylesheets/app.css"> 
    <!-- Include ethers.js -->
    <script src="https://cdn.jsdelivr.net/npm/ethers@5.0.0/dist/ethers.umd.min.js"></script>
</head>
</head>
<body>
    <!-- Login Button -->
    <button id="loginButton">Login with MetaMask</button>

    <h1 class="wave">Hotel Booking</h1>
    <div class="welcome-text">Welcome here, you can begin your journey!</div>
    <div class="button-container">
        <button class="entry" id="changeQuota">Entry</button>
    </div>
    <div class="sci-fi-bar">
        <span>608lab×技大链协xiaolangzi</span>
    </div>
    <div class="section">Hotel numbers: <span id="numRegistrants">10000</span></div>
    <div id="bookingContent"></div>

    <!-- Corner images -->
    <a href="http://example.com/right-page" target="_blank">
        <img src="/home/xiaolangzi/dapp/hotel-booking/app/%E6%88%AA%E5%9B%BE%202025-03-19%2014-11-24.png" alt="Right Corner Image" class="corner-image-right">
    </a>
    
    <a href="https://www.wanglab.fun/" target="_blank">
        <img src="/home/xiaolangzi/dapp/hotel-booking/app/%E7%B2%98%E8%B4%B4%E7%9A%84%E5%9B%BE%E5%83%8F.png" alt="Left Corner Image" class="corner-image-left">
    </a>
    
    <!-- Adding the animated sprite -->
    <script>
            // Right image click handler
        document.getElementById("rightImage").addEventListener("click", function () {
            // Add shrinking animation
            this.classList.add("shrink");

            // Wait for the animation to finish and then redirect
            setTimeout(function () {
                window.location.href = "http://example.com/right-page";  // Replace with your URL
            }, 300);  // 300ms delay to match the animation duration
        });

        // Left image click handler
        document.getElementById("leftImage").addEventListener("click", function () {
            // Add shrinking animation
            this.classList.add("shrink");

            // Wait for the animation to finish and then redirect
            setTimeout(function () {
                window.location.href = "http://example.com/left-page";  // Replace with your URL
            }, 300);  // 300ms delay to match the animation duration
        });
        
        // Change quota button listener
        document.getElementById("changeQuota").addEventListener("click", function () {
            window.location.href = "http://127.0.0.1:8080/booking.html";
        });

         // MetaMask login button listener
        document.getElementById("loginButton").addEventListener("click", async function () {
            // Check if Metamask is installed
            if (typeof window.ethereum !== 'undefined') {
                const provider = new ethers.BrowserProvider(window.ethereum);

                try {
                    // Request access to the user's accounts
                    const accounts = await provider.send("eth_requestAccounts", []);
                    const userAddress = accounts[0];

                    // Display user wallet address (you can also send this to the backend for verification)
                    alert("Connected with wallet: " + userAddress);
                    
                    // Optionally, redirect to another page or perform other actions
                    window.location.href = "http://127.0.0.1:8080/booking.html";  // Modify to your desired page

                } catch (error) {
                    console.error("Error connecting to wallet:", error);
                    alert("Failed to connect to wallet.");
                }
            } else {
                alert("MetaMask is not installed. Please install MetaMask.");
            }
        });
    </script>
</body>
</html>

