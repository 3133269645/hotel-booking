<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hotel Booking Home</title>
    <link href="https://fonts.loli.net/css?family=Open+Sans:400,700,300" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="/stylesheets/booking.css">  <!-- 确保引用路径正确 -->
</head>
<body>
    <h1 data-text="Hotel Booking Home">Hotel Booking Home</h1>
    <div class="image-container">
        <div class="image-item" style="background-image: url('https://tse4-mm.cn.bing.net/th/id/OIP-C.cQVQii7Z04oFTyAJx1pIUgHaE8?w=290&h=193&c=7&r=0&o=5&dpr=1.3&pid=1.7');">
            <a href="javascript:void(0);" class="button" data-amount="100" data-date="" onclick="openDatePicker(this)">预定: (100$)</a>
        </div>
        <div class="image-item" style="background-image: url('https://tse4-mm.cn.bing.net/th/id/OIP-C.fzSWNz3OOsA_fClm_gKF9gHaHa?w=192&h=193&c=7&r=0&o=5&dpr=1.3&pid=1.7');">
            <a href="javascript:void(0);" class="button" data-amount="120" data-date="" onclick="openDatePicker(this)">预定: (120$)</a>
        </div>
        <div class="image-item" style="background-image: url('https://tse4-mm.cn.bing.net/th/id/OIP-C.Gyw81yNB697cMxMhqnI3XAHaE7?w=270&h=192&c=7&r=0&o=5&dpr=1.3&pid=1.7');">
            <a href="javascript:void(0);" class="button" data-amount="130" data-date="" onclick="openDatePicker(this)">预定: (130$)</a>
        </div>
        <div class="image-item" style="background-image: url('https://tse3-mm.cn.bing.net/th/id/OIP-C.crlK90C12-YnF0m0wN5fKwHaGv?w=237&h=216&c=7&r=0&o=5&dpr=1.3&pid=1.7');">
            <a href="javascript:void(0);" class="button" data-amount="115" data-date="" onclick="openDatePicker(this)">预定: (115$)</a>
        </div>
    </div>

    <!-- 日期选择框 (Modal) -->
    <div id="datePickerModal" style="display: none;"> <!-- 初始化时隐藏 -->
        <div class="modal-content">
            <h3>选择预定日期</h3>
            <input type="date" id="datePicker" />
            <button id="confirmDate">确认日期</button>
            <button id="cancelDate">取消</button>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/web3@1.6.1/dist/web3.min.js"></script>
    <script>
        fetch('http://localhost:8545/app/javascripts/Conference.json') // 确保路径正确
          .then(response => response.json())
          .then(data => {
            console.log('Conference JSON loaded:', data);
            // 在这里处理数据
          })
          .catch(error => console.error('Error loading the JSON file:', error));
      </script>
      

    

    <script>
        // 打开日期选择框的函数
        function openDatePicker(button) {
            var amount = button.getAttribute('data-amount');
            // 设置该按钮的金额数据到Modal
            document.getElementById('datePickerModal').style.display = 'flex'; 
            // 为确认按钮绑定金额数据
            document.getElementById('confirmDate').setAttribute('data-amount', amount);
            document.getElementById('confirmDate').setAttribute('data-button', button);
        }

        // 确认日期按钮的事件
        document.getElementById('confirmDate').addEventListener('click', function() {
            var amount = this.getAttribute('data-amount');
            var date = document.getElementById('datePicker').value;
            var button = this.getAttribute('data-button');

            if (date) {
                // 调用合约交易逻辑
                App.changeQuota(amount, date); // 执行合约的相关方法
                closeDatePicker();
            } else {
                alert('请选择一个日期');
            }
        });

        // 取消日期选择框
        document.getElementById('cancelDate').addEventListener('click', function() {
            closeDatePicker();
        });

        // 关闭日期选择框
        function closeDatePicker() {
            document.getElementById('datePickerModal').style.display = 'none';
        }
    </script>
</body>
</html>
